# مستندات مدل‌های سیستم

## مدل‌های Order

در این سیستم دو مدل Order مختلف وجود دارد که هر کدام کاربرد خود را دارند:

### 1. apps.orders.Order (سفارش تولیدی تفصیلی)

این مدل برای مدیریت سفارش‌های تولیدی با جزئیات کامل طراحی شده است:

**ویژگی‌ها:**
- مدیریت تولید لباس با جزئیات فنی (سایز، پارچه، رنگ)
- سیستم آیتم‌های چندگانه (OrderItem)
- مدیریت پرداخت پیش‌پرداخت
- ردیابی مراحل تولید
- اتصال به طرح‌ها (Design) و قالب‌های کاربر (UserTemplate)

**کاربرد:** 
زمانی که مشتری سفارش مفصلی برای تولید لباس می‌دهد و نیاز به ردیابی کامل فرآیند تولید است.

### 2. apps.core.Order (سفارش کلی پس از مناقصه)

این مدل ساده‌تر است و بیشتر برای مدیریت سفارشات حاصل از مناقصات استفاده می‌شود:

**ویژگی‌ها:**
- اتصال به Tender (مناقصه)
- مدیریت مراحل پرداخت (OrderStage)
- سیستم تراکنش مرحله‌ای
- ساده‌تر و کلی‌تر

**کاربرد:**
زمانی که یک مناقصه برنده شده و باید سفارش کلی ایجاد شود با مراحل پرداخت مشخص.

## توصیه برای آینده

### گزینه 1: حفظ هر دو مدل (پیشنهاد شده)
- `orders.Order` برای سفارشات تولیدی تفصیلی
- `core.Order` برای سفارشات حاصل از مناقصات
- اضافه کردن فیلد `order_type` برای تشخیص نوع سفارش

### گزینه 2: ادغام مدل‌ها
- ایجاد یک مدل واحد با فیلدهای اختیاری
- پیچیده‌تر اما یکپارچه‌تر

## مدل‌های پرداخت

### apps.payment.Payment
برای پرداخت‌های مربوط به `orders.Order`

### apps.core.Transaction
برای تراکنش‌های مربوط به `core.OrderStage`

**نکته:** در آینده ممکن است نیاز به یکپارچه‌سازی این دو سیستم پرداخت باشد.

## مدل Role و Permissions

مدل `Role` حالا به درستی با سیستم Permissions جنگو متصل شده است:
- استفاده از `ManyToManyField` با `Permission`
- امکان اختصاص مجوزهای خاص به هر نقش
- متد کمکی `get_permissions_list()` برای دریافت لیست مجوزها 